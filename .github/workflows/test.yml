name: tests CJA
run-name: ${{ github.actor }} / tests CJA

on:
  workflow_run:
    workflows: build-and-test
    types:
      - completed
      
jobs:
  deploy:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    runs-on: ubuntu-latest
    steps:
      - name: print test image tag
        run: |
          echo "test image tag : ${{steps.build-and-test.outputs.test_image_tag}}"

  on-build-test-failure:
    if: ${{ github.event.workflow_run.conclusion == 'failure' }}
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo "Build and test app failed."
          exit 1
